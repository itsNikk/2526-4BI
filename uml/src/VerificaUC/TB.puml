@startuml
left to right direction
skinparam packageStyle rectangle

' ==========================================
' VERSIONE B - SKYDELIVER DRONI
' ==========================================

' ========== ATTORI ==========
actor "Coordinatore\nConsegne" as CC
actor "Direttore\nOperativo" as DO
actor "Cliente" as CLI
actor "Supervisore\nSicurezza" as SS
actor "Tecnico\nSistemi" as TS

' ========== GENERALIZZAZIONE ATTORI ==========
' Il Direttore Operativo eredita tutte le capacità del Coordinatore Consegne
' Citazione testo: "mantiene tutte le capacità del Coordinatore Consegne"
DO -up-|> CC

' ========== SISTEMA ==========
rectangle "Sistema Gestione Flotta SkyDeliver" {

  ' --- Area Gestione Operativa ---
  usecase "Tracciare Stato\nConsegna" as UC1
  usecase "Richiedere\nModifica\nPiano Volo" as UC2
  usecase "Pubblicare Piano\nOperativo\nGiornaliero" as UC3
  usecase "Notificare\nCoordinatori\ne Partner" as UC4

  ' --- Area Sicurezza ---
  usecase "Monitorare\nStato Flotta" as UC5
  usecase "Attivare\nRichiamo\nEmergenza" as UC6
  usecase "Notificare\nDirettore\nOperativo" as UC7

  ' --- Area Manutenzione ---
  usecase "Eseguire\nManutenzione\nInfrastruttura" as UC8
  usecase "Registrare\nIntervento\nsu Log" as UC9
}

' ========== RELAZIONI ATTORI → CASI D'USO ==========
CLI -down-> UC1 : traccia
CC -down-> UC2 : richiede
DO -down-> UC3 : pubblica
SS -down-> UC5 : monitora
SS -down-> UC6 : attiva
TS -down-> UC8 : esegue

' ========== RELAZIONI INCLUDE ==========
' Include = il caso d'uso base DEVE sempre eseguire il caso incluso
UC3 .down.> UC4 : <<include>>
note on link
  Ogni pubblicazione DEVE
  notificare coordinatori
  e partner
end note

UC8 .down.> UC9 : <<include>>
note on link
  Ogni manutenzione DEVE
  essere registrata
end note

' ========== RELAZIONI EXTEND ==========
' Extend = il caso d'uso base PUÒ opzionalmente essere esteso
' CRITICO: questa è la TRAPPOLA principale della prova
UC6 .down.> UC7 : <<extend>>
note on link
  Notifica SOLO SE
  si attiva il richiamo
  (condizionale)
end note

@enduml